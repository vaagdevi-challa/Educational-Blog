{"ast":null,"code":"// ‚úÖ FULLY WORKING EditBlog.js\n// Includes: Fetching blog, Update with/without image, Delete button\nimport React,{useEffect,useState}from\"react\";import{useNavigate,useParams}from\"react-router-dom\";import axios from\"../services/api\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const EditBlog=()=>{const{id}=useParams();const navigate=useNavigate();const[form,setForm]=useState({title:\"\",content:\"\",category:\"\",image:\"\"});const[file,setFile]=useState(null);useEffect(()=>{const fetchBlog=async()=>{try{const res=await axios.get(`/blogs/${id}`);setForm(res.data.blog);}catch(err){alert(\"Failed to fetch blog\");}};fetchBlog();},[id]);const handleChange=e=>setForm({...form,[e.target.name]:e.target.value});const handleFileChange=e=>{setFile(e.target.files[0]);};const handleSubmit=async e=>{e.preventDefault();try{const formData=new FormData();formData.append(\"title\",form.title);formData.append(\"category\",form.category);formData.append(\"content\",form.content);if(file){formData.append(\"image\",file);}else{formData.append(\"image\",form.image);}await axios.put(`/blogs/${id}`,formData,{headers:{\"Content-Type\":\"multipart/form-data\"}});alert(\"Blog updated successfully\");navigate(\"/dashboard\");}catch(err){var _err$response,_err$response$data;alert(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||\"Update failed\");}};const handleDelete=async()=>{if(!window.confirm(\"Are you sure you want to delete this blog?\"))return;try{await axios.delete(`/blogs/${id}`);alert(\"Blog deleted successfully\");navigate(\"/dashboard\");}catch(err){var _err$response2,_err$response2$data;alert(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.message)||\"Delete failed\");}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container py-5\",style:{maxWidth:\"800px\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Edit Blog Post\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:handleDelete,children:\"\\uD83D\\uDDD1\\uFE0F Delete Blog\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,encType:\"multipart/form-data\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-control mb-3\",name:\"title\",placeholder:\"Title\",value:form.title,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control mb-3\",name:\"category\",placeholder:\"Category\",value:form.category,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control mb-3\",type:\"file\",accept:\"image/*\",onChange:handleFileChange}),form.image&&!file&&/*#__PURE__*/_jsx(\"img\",{src:`http://localhost:5000${form.image}`,alt:\"Current\",className:\"mb-3\",style:{maxWidth:\"100%\",maxHeight:200,borderRadius:8}}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control mb-3\",name:\"content\",placeholder:\"Content\",value:form.content,onChange:handleChange,rows:6,required:true}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",type:\"submit\",children:\"Save Changes\"})]})]});};export default EditBlog;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","useParams","axios","jsx","_jsx","jsxs","_jsxs","EditBlog","id","navigate","form","setForm","title","content","category","image","file","setFile","fetchBlog","res","get","data","blog","err","alert","handleChange","e","target","name","value","handleFileChange","files","handleSubmit","preventDefault","formData","FormData","append","put","headers","_err$response","_err$response$data","response","message","handleDelete","window","confirm","delete","_err$response2","_err$response2$data","className","style","maxWidth","children","onClick","onSubmit","encType","placeholder","onChange","required","type","accept","src","alt","maxHeight","borderRadius","rows"],"sources":["C:/Users/vaagd/edublog4/frontend/src/pages/EditBlog.js"],"sourcesContent":["// ‚úÖ FULLY WORKING EditBlog.js\r\n// Includes: Fetching blog, Update with/without image, Delete button\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport axios from \"../services/api\";\r\n\r\nconst EditBlog = () => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const [form, setForm] = useState({\r\n    title: \"\",\r\n    content: \"\",\r\n    category: \"\",\r\n    image: \"\",\r\n  });\r\n  const [file, setFile] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchBlog = async () => {\r\n      try {\r\n        const res = await axios.get(`/blogs/${id}`);\r\n        setForm(res.data.blog);\r\n      } catch (err) {\r\n        alert(\"Failed to fetch blog\");\r\n      }\r\n    };\r\n    fetchBlog();\r\n  }, [id]);\r\n\r\n  const handleChange = (e) =>\r\n    setForm({ ...form, [e.target.name]: e.target.value });\r\n\r\n  const handleFileChange = (e) => {\r\n    setFile(e.target.files[0]);\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append(\"title\", form.title);\r\n      formData.append(\"category\", form.category);\r\n      formData.append(\"content\", form.content);\r\n      if (file) {\r\n        formData.append(\"image\", file);\r\n      } else {\r\n        formData.append(\"image\", form.image);\r\n      }\r\n\r\n      await axios.put(`/blogs/${id}`, formData, {\r\n        headers: { \"Content-Type\": \"multipart/form-data\" },\r\n      });\r\n\r\n      alert(\"Blog updated successfully\");\r\n      navigate(\"/dashboard\");\r\n    } catch (err) {\r\n      alert(err.response?.data?.message || \"Update failed\");\r\n    }\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    if (!window.confirm(\"Are you sure you want to delete this blog?\")) return;\r\n    try {\r\n      await axios.delete(`/blogs/${id}`);\r\n      alert(\"Blog deleted successfully\");\r\n      navigate(\"/dashboard\");\r\n    } catch (err) {\r\n      alert(err.response?.data?.message || \"Delete failed\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container py-5\" style={{ maxWidth: \"800px\" }}>\r\n      <div className=\"d-flex justify-content-between mb-4\">\r\n        <h2>Edit Blog Post</h2>\r\n        <button className=\"btn btn-danger\" onClick={handleDelete}>\r\n          üóëÔ∏è Delete Blog\r\n        </button>\r\n      </div>\r\n      <form onSubmit={handleSubmit} encType=\"multipart/form-data\">\r\n        <input\r\n          className=\"form-control mb-3\"\r\n          name=\"title\"\r\n          placeholder=\"Title\"\r\n          value={form.title}\r\n          onChange={handleChange}\r\n          required\r\n        />\r\n        <input\r\n          className=\"form-control mb-3\"\r\n          name=\"category\"\r\n          placeholder=\"Category\"\r\n          value={form.category}\r\n          onChange={handleChange}\r\n          required\r\n        />\r\n        <input\r\n          className=\"form-control mb-3\"\r\n          type=\"file\"\r\n          accept=\"image/*\"\r\n          onChange={handleFileChange}\r\n        />\r\n        {form.image && !file && (\r\n          <img\r\n            src={`http://localhost:5000${form.image}`}\r\n            alt=\"Current\"\r\n            className=\"mb-3\"\r\n            style={{ maxWidth: \"100%\", maxHeight: 200, borderRadius: 8 }}\r\n          />\r\n        )}\r\n        <textarea\r\n          className=\"form-control mb-3\"\r\n          name=\"content\"\r\n          placeholder=\"Content\"\r\n          value={form.content}\r\n          onChange={handleChange}\r\n          rows={6}\r\n          required\r\n        />\r\n        <button className=\"btn btn-primary\" type=\"submit\">\r\n          Save Changes\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EditBlog;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}