{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useNavigate,useParams}from\"react-router-dom\";import axios from\"../services/api\";import\"../styles/home.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BlogDetail=()=>{var _blog$author,_blog$author2;const{id}=useParams();const navigate=useNavigate();const[blog,setBlog]=useState(null);const[comment,setComment]=useState(\"\");const[userId,setUserId]=useState(\"\");const[loading,setLoading]=useState(true);useEffect(()=>{const fetchBlog=async()=>{try{const res=await axios.get(`/blogs/${id}`);setBlog(res.data.blog);setUserId(res.data.userId);setLoading(false);}catch(error){console.error(\"Error loading blog:\",error);setLoading(false);}};fetchBlog();},[id]);const handlePostComment=async()=>{if(!comment.trim())return;try{const res=await axios.post(`/blogs/${id}/comments`,{text:comment});setBlog(prev=>({...prev,comments:[...(prev.comments||[]),res.data]}));setComment(\"\");}catch(error){console.error(\"Failed to post comment:\",error);}};const handleEdit=()=>navigate(`/edit/${id}`);const handleBack=()=>navigate(\"/dashboard\");if(loading)return/*#__PURE__*/_jsx(\"p\",{className:\"text-center mt-5\",children:\"Loading...\"});if(!blog)return/*#__PURE__*/_jsx(\"p\",{className:\"text-center mt-5\",children:\"Blog not found\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"container py-5\",style:{maxWidth:\"900px\"},children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-link mb-3 text-muted\",onClick:handleBack,style:{textDecoration:\"none\"},children:\"\\u2190 Back to Blogs\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center mb-4\",children:/*#__PURE__*/_jsx(\"img\",{src:`http://localhost:5000${blog.image}`,alt:blog.title,className:\"img-fluid rounded\",style:{borderRadius:\"20px\",maxHeight:\"400px\",objectFit:\"cover\"}})}),/*#__PURE__*/_jsx(\"span\",{className:\"badge mb-2\",style:{backgroundColor:\"#ede9fe\",color:\"#7c3aed\",fontSize:\"0.8rem\",padding:\"0.4rem 0.8rem\",borderRadius:\"1rem\"},children:blog.category}),/*#__PURE__*/_jsx(\"h2\",{className:\"fw-bold\",children:blog.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-muted mb-4\",children:[\"By: \",((_blog$author=blog.author)===null||_blog$author===void 0?void 0:_blog$author.name)||\"Anonymous\"]}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:\"1.1rem\",lineHeight:\"1.6\"},children:blog.content}),userId===((_blog$author2=blog.author)===null||_blog$author2===void 0?void 0:_blog$author2._id)&&/*#__PURE__*/_jsx(\"div\",{className:\"text-end mb-3\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-primary\",onClick:handleEdit,children:\"\\u270F\\uFE0F Edit Blog\"})}),/*#__PURE__*/_jsx(\"hr\",{className:\"my-4\"}),/*#__PURE__*/_jsx(\"h5\",{className:\"fw-bold mb-3\",children:\"Comments\"}),blog.comments&&blog.comments.length>0?blog.comments.map((c,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:c.name}),\": \",c.text]},idx)):/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"No comments yet. Be the first to comment!\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3\",children:[/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control mb-2\",rows:3,placeholder:\"Write a comment...\",value:comment,onChange:e=>setComment(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",style:{backgroundColor:\"#7c3aed\",color:\"#fff\"},onClick:handlePostComment,children:\"\\uD83D\\uDE80 Post Comment\"})]})]});};export default BlogDetail;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","useParams","axios","jsx","_jsx","jsxs","_jsxs","BlogDetail","_blog$author","_blog$author2","id","navigate","blog","setBlog","comment","setComment","userId","setUserId","loading","setLoading","fetchBlog","res","get","data","error","console","handlePostComment","trim","post","text","prev","comments","handleEdit","handleBack","className","children","style","maxWidth","onClick","textDecoration","src","image","alt","title","borderRadius","maxHeight","objectFit","backgroundColor","color","fontSize","padding","category","author","name","lineHeight","content","_id","length","map","c","idx","rows","placeholder","value","onChange","e","target"],"sources":["C:/Users/vaagd/edublog4/frontend/src/pages/BlogDetail.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport axios from \"../services/api\";\r\nimport \"../styles/home.css\";\r\n\r\nconst BlogDetail = () => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const [blog, setBlog] = useState(null);\r\n  const [comment, setComment] = useState(\"\");\r\n  const [userId, setUserId] = useState(\"\");\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchBlog = async () => {\r\n      try {\r\n        const res = await axios.get(`/blogs/${id}`);\r\n        setBlog(res.data.blog);\r\n        setUserId(res.data.userId);\r\n        setLoading(false);\r\n      } catch (error) {\r\n        console.error(\"Error loading blog:\", error);\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchBlog();\r\n  }, [id]);\r\n\r\n  const handlePostComment = async () => {\r\n    if (!comment.trim()) return;\r\n    try {\r\n      const res = await axios.post(`/blogs/${id}/comments`, { text: comment });\r\n      setBlog((prev) => ({\r\n        ...prev,\r\n        comments: [...(prev.comments || []), res.data],\r\n      }));\r\n      setComment(\"\");\r\n    } catch (error) {\r\n      console.error(\"Failed to post comment:\", error);\r\n    }\r\n  };\r\n\r\n  const handleEdit = () => navigate(`/edit/${id}`);\r\n  const handleBack = () => navigate(\"/dashboard\");\r\n\r\n  if (loading) return <p className=\"text-center mt-5\">Loading...</p>;\r\n  if (!blog) return <p className=\"text-center mt-5\">Blog not found</p>;\r\n\r\n  return (\r\n    <div className=\"container py-5\" style={{ maxWidth: \"900px\" }}>\r\n      <button\r\n        className=\"btn btn-link mb-3 text-muted\"\r\n        onClick={handleBack}\r\n        style={{ textDecoration: \"none\" }}\r\n      >\r\n        ‚Üê Back to Blogs\r\n      </button>\r\n\r\n      <div className=\"text-center mb-4\">\r\n        <img\r\n          src={`http://localhost:5000${blog.image}`}\r\n          alt={blog.title}\r\n          className=\"img-fluid rounded\"\r\n          style={{ borderRadius: \"20px\", maxHeight: \"400px\", objectFit: \"cover\" }}\r\n        />\r\n      </div>\r\n\r\n      <span\r\n        className=\"badge mb-2\"\r\n        style={{\r\n          backgroundColor: \"#ede9fe\",\r\n          color: \"#7c3aed\",\r\n          fontSize: \"0.8rem\",\r\n          padding: \"0.4rem 0.8rem\",\r\n          borderRadius: \"1rem\",\r\n        }}\r\n      >\r\n        {blog.category}\r\n      </span>\r\n\r\n      <h2 className=\"fw-bold\">{blog.title}</h2>\r\n      <p className=\"text-muted mb-4\">By: {blog.author?.name || \"Anonymous\"}</p>\r\n\r\n      <p style={{ fontSize: \"1.1rem\", lineHeight: \"1.6\" }}>{blog.content}</p>\r\n\r\n      {userId === blog.author?._id && (\r\n        <div className=\"text-end mb-3\">\r\n          <button className=\"btn btn-outline-primary\" onClick={handleEdit}>\r\n            ‚úèÔ∏è Edit Blog\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      <hr className=\"my-4\" />\r\n\r\n      <h5 className=\"fw-bold mb-3\">Comments</h5>\r\n      {blog.comments && blog.comments.length > 0 ? (\r\n        blog.comments.map((c, idx) => (\r\n          <div key={idx} className=\"mb-2\">\r\n            <strong>{c.name}</strong>: {c.text}\r\n          </div>\r\n        ))\r\n      ) : (\r\n        <p className=\"text-muted\">No comments yet. Be the first to comment!</p>\r\n      )}\r\n\r\n      <div className=\"mt-3\">\r\n        <textarea\r\n          className=\"form-control mb-2\"\r\n          rows={3}\r\n          placeholder=\"Write a comment...\"\r\n          value={comment}\r\n          onChange={(e) => setComment(e.target.value)}\r\n        />\r\n        <button\r\n          className=\"btn\"\r\n          style={{ backgroundColor: \"#7c3aed\", color: \"#fff\" }}\r\n          onClick={handlePostComment}\r\n        >\r\n          üöÄ Post Comment\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BlogDetail;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}